import re
from itertools import chain
from unicodedata import normalize

_lat2grk = {
    r'^(?:h[UY]i|H[uy]i)[^~]': 'Ὗι',
    r'^(?:h[YU]|H[yu])[\\^~]': 'Ὗ',
    r"^(?:h[UY]i|H[uy]i)'": 'Ὕι',
    r'^(?:h[UY]i|H[uy]i)`': 'Ὓι',
    r'^(?:h[UY]i|H[uy]i)': 'Ὑι',
    r'^(?:Ha|hA)[\\^~]/i': 'ᾏ',
    r'^(?:Hh|hH)[\\^~]/i': 'ᾟ',
    r'^(?:Hw|hW)[\\^~]/i': 'ᾯ',
    r'^(?:h[YU]|H[yu])`': 'Ὓ',
    r"^(?:h[YU]|H[yu])'": 'Ὕ',
    r'^(?:hAu|Hau)[^~]': 'Ἇυ',
    r'^(?:hAi|Hai)[^~]': 'Ἆι',
    r'^(?:hA|Ha)[\\^~]': 'Ἇ',
    r'^(?:hH|Hh)[\\^~]': 'Ἧ',
    r'^(?:hI|Hi)[\\^~]': 'Ἷ',
    r'^(?:hW|Hw)[\\^~]': 'Ὧ',
    r'^[Hh]h[\\^~]/i': 'ᾗ',
    r'^(?:Ha|hA)`/i': 'ᾋ',
    r"^(?:Ha|hA)'/i": 'ᾍ',
    r'^(?:Hh|hH)`/i': 'ᾛ',
    r"^(?:Hh|hH)'/i": 'ᾝ',
    r'^(?:Hw|hW)`/i': 'ᾫ',
    r"^(?:Hw|hW)'/i": 'ᾭ',
    r"^(?:hOu|Hou)'": 'Ὅυ',
    r'^(?:hOu|Hou)`': 'Ὃυ',
    r"^(?:hEu|Heu)'": 'Ἕυ',
    r'^(?:hEu|Heu)`': 'Ἓυ',
    r"^(?:hAu|Hau)'": 'Ἅυ',
    r'^(?:hAu|Hau)`': 'Ἃυ',
    r"^(?:hEi|Hei)'": 'Ἕι',
    r'^(?:hEi|Hei)`': 'Ἓι',
    r"^(?:hOi|Hoi)'": 'Ὅι',
    r'^(?:hOi|Hoi)`': 'Ὃι',
    r"^(?:hAi|Hai)'": 'Ἄι',
    r'^(?:hAi|Hai)`': 'Ἂι',
    r'^h[YU]|H[yu]': 'Ὁ',
    r'^(?:Ha|hA)/i': 'ᾉ',
    r'^(?:Hh|hH)/i': 'ᾙ',
    r'^(?:Hw|hW)/i': 'ᾩ',
    r'^(?:hOu|Hou)': 'Ὁυ',
    r'^(?:hEu|Heu)': 'Ἒυ',
    r'^(?:hAu|Hau)': 'Ἁυ',
    r'^(?:hEi|Hei)': 'Ἑι',
    r'^(?:hOi|Hoi)': 'Ὁι',
    r'^(?:hAi|Hai)': 'Ἁι',
    r'^h[yu][\\^~]': 'ὗ',
    r'^(?:hA|Ha)`': 'Ἃ',
    r"^(?:hA|Ha)'": 'Ἅ',
    r'^(?:hE|He)`': 'Ἓ',
    r"^(?:hE|He)'": 'Ἕ',
    r'^(?:hH|Hh)`': 'Ἣ',
    r"^(?:hH|Hh)'": 'Ἥ',
    r'^(?:hI|Hi)`': 'Ἳ',
    r"^(?:hI|Hi)'": 'Ἵ',
    r'^(?:hO|Ho)`': 'Ὃ',
    r"^(?:hO|Ho)'": 'Ὅ',
    r'^(?:hW|Hw)`': 'Ὣ',
    r"^(?:hW|Hw)'": 'Ὥ',
    r'^h[uy]i[^~]': 'υἷ',
    r'^[yu][\\^~]': 'ὖ',
    r'^[YU][\\^~]': 'ὖ',
    r'^ha[\\^~]/i': 'ᾇ',
    r'^hw[\\^~]/i': 'ᾧ',
    r'^[uy]i[^~]': 'υἶ',
    r'^a[\\^~]/i': 'ᾆ',
    r'^A[\\^~]/i': 'ᾎ',
    'r^h[\\^~]/i': 'ᾖ',
    r'^H[\\^~]/i': 'ᾞ',
    r'^w[\\^~]/i': 'ᾦ',
    r'^W[\\^~]/i': 'ᾮ',
    r'[yu][\\^~]': 'ῦ',
    r'[ÿü][\\^~]': 'ῧ',
    r'^[Hh]h`/i': 'ᾓ',
    r"^[Hh]h'/i": 'ᾕ',
    r's(?:\\b|$)': 'ς',
    r'^ha[\\^~]': 'ἇ',
    r'^hh[\\^~]': 'ἧ',
    r'^hi[\\^~]': 'ἷ',
    r'^hw[\\^~]': 'ὧ',
    r'a[\\^~]/i': 'ᾷ',
    r'h[\\^~]/i': 'ῇ',
    r'w[\\^~]/i': 'ῷ',
    r'[.]?s[.]': 'σ',
    r'[.]?S[.]': 'Σ',
    r'^[Hh]h/i': 'ᾑ',
    r"^h[uy]i'": 'υἵ',
    r'^h[uy]i`': 'υἳ',
    r'^hou[^~]': 'οὗ',
    r'^heu[^~]': 'εὗ',
    r'^hau[^~]': 'αὗ',
    r'^hei[^~]': 'εἷ',
    r'^hoi[^~]': 'οἷ',
    r'^hai[^~]': 'αἷ',
    r'^a[\\^~]': 'ἆ',
    r'^A[\\^~]': 'Ἆ',
    r'^h[\\^~]': 'ἦ',
    r'^H[\\^~]': 'Ἦ',
    r'^i[\\^~]': 'ἶ',
    r'^I[\\^~]': 'Ἶ',
    r'^w[\\^~]': 'ὦ',
    r'^W[\\^~]': 'Ὦ',
    r'^h[yu]`': 'ὓ',
    r"^h[yu]'": 'ὕ',
    r"^[uy]i'": 'υἴ',
    r'^[uy]i`': 'υἲ',
    r'^h[uy]i': 'υἱ',
    r'^ou[^~]': 'οὖ',
    r'^eu[^~]': 'εὖ',
    r'^Au[^~]': 'Ἆυ',
    r'^au[^~]': 'αὖ',
    r'^ei[^~]': 'εἶ',
    r'^oi[^~]': 'οἶ',
    r'^Ai[^~]': 'Ἇι',
    r'^ai[^~]': 'αἶ',
    r'a[\\^~]': 'ᾶ',
    r'h[\\^~]': 'ῆ',
    r'i[\\^~]': 'ῖ',
    r'ï[\\^~]': 'ῗ',
    r'w[\\^~]': 'ῶ',
    r'^hA|Ha': 'Ἁ',
    r'^hE|He': 'Ἑ',
    r'^hH|Hh': 'Ἡ',
    r'^hI|Hi': 'Ἱ',
    r'^hO|Ho': 'Ὁ',
    r'^h[yu]': 'ὑ',
    r'^[yu]`': 'ὒ',
    r"^[yu]'": 'ὔ',
    r'^[YU]`': 'Ὂ',
    r"^[YU]'": 'Ὄ',
    r'^hW|Hw': 'Ὡ',
    r'^ha`/i': 'ᾃ',
    r"^ha'/i": 'ᾅ',
    r'^hw`/i': 'ᾣ',
    r"^hw'/i": 'ᾥ',
    r'^R[Hh]': 'Ῥ',
    r'^[uy]i': 'υἰ',
    r'^[yu]': 'ὐ',
    r'^[YU]': 'Ὑ',
    r'[yu]`': 'ὺ',
    r"[yu]'": 'ύ',
    r'^ha/i': 'ᾁ',
    r'^a`/i': 'ᾂ',
    r"^a'/i": 'ᾄ',
    r'^A`/i': 'ᾊ',
    r"^A'/i": 'ᾌ',
    r'^h`/i': 'ᾒ',
    r"^h'/i": 'ᾔ',
    r'^H`/i': 'ᾚ',
    r"^H'/i": 'ᾜ',
    r'^hw/i': 'ᾡ',
    r'^w`/i': 'ᾢ',
    r"^w'/i": 'ᾤ',
    r'^W`/i': 'ᾪ',
    r"^W'/i": 'ᾬ',
    r'[ÿü]`': 'ῢ',
    r"[ÿü]'": 'ΰ',
    r'[YU]`': 'Ὺ',
    r"[YU]'": 'Ύ',
    r'C[Hh]': 'Χ',
    r'K[Hh]': 'Χ',
    r'P[Hh]': 'Φ',
    r'P[Ss]': 'Ψ',
    r'T[Hh]': 'Θ',
    r"^hou'": 'οὕ',
    r'^hou`': 'οὓ',
    r"^heu'": 'εὕ',
    r'^heu`': 'εὓ',
    r"^hau'": 'αὕ',
    r'^hau`': 'αὓ',
    r"^hei'": 'εἵ',
    r'^hei`': 'εἳ',
    r"^hoi'": 'οἵ',
    r"^hai'": 'αἵ',
    r'^hai`': 'αἳ',
    r'^ha`': 'ἃ',
    r"^ha'": 'ἅ',
    r'^he`': 'ἓ',
    r"^he'": 'ἕ',
    r'^hh`': 'ἣ',
    r"^hh'": 'ἥ',
    r'^hi`': 'ἳ',
    r"^hi'": 'ἵ',
    r'^ho`': 'ὃ',
    r"^ho'": 'ὅ',
    r'^hw`': 'ὣ',
    r"^hw'": 'ὥ',
    r'^a/i': 'ᾀ',
    r'^A/i': 'ᾈ',
    r'^h/i': 'ᾐ',
    r'^H/i': 'ᾘ',
    r'^w/i': 'ᾠ',
    r'^W/i': 'ᾨ',
    r'a`/i': 'ᾲ',
    r"a'/i": 'ᾴ',
    r'h`/i': 'ῂ',
    r"h'/i": 'ῄ',
    r'w`/i': 'ῲ',
    r'w#/i': 'ῴ',
    r"^Ou'": 'Ὄυ',
    r'^Ou`': 'Ὂυ',
    r"^ou'": 'οὔ',
    r'^ou`': 'οὒ',
    r'^hou': 'οὑ',
    r"^Eu'": 'Ἔυ',
    r'^Eu`': 'Ἒυ',
    r"^eu'": 'εὔ',
    r'^eu`': 'εὒ',
    r'^heu': 'εὑ',
    r"^Au'": 'Ἄυ',
    r'^Au`': 'Ἂυ',
    r"^au'": 'αὔ',
    r'^au`': 'αὒ',
    r'^hau': 'αὑ',
    r'^Ei`': 'Ἒι',
    r"^Ei'": 'Ἔι',
    r"^ei'": 'εἴ',
    r'^ei`': 'εἲ',
    r'^hei': 'εἱ',
    r"^Oi'": 'Ὄι',
    r'^Oi`': 'Ὂι',
    r"^oi'": 'οἴ',
    r'^oi`': 'οἲ',
    r'hoi`': 'οἳ',
    r'^hoi': 'οἱ',
    r'^Ai`': 'Ἃι',
    r"^Ai'": 'Ἅι',
    r"^ai'": 'αἴ',
    r'^ai`': 'αἲ',
    r'^hai': 'αί',
    r'nkh': 'γχ',
    r'^rh': 'ῥ',
    r'^ha': 'ἁ',
    r'^a`': 'ἂ',
    r"^a'": 'ἄ',
    r'^A`': 'Ἂ',
    r"^A'": 'Ἄ',
    r'^he': 'ἑ',
    r'^e`': 'ἒ',
    r"^e'": 'ἔ',
    r'^E`': 'Ἒ',
    r"^E'": 'Ἔ',
    r'^hh': 'ἡ',
    r'^h`': 'ἢ',
    r"^h'": 'ἤ',
    r'^H`': 'Ἢ',
    r"^H'": 'Ἤ',
    r'^hi': 'ἱ',
    r'^i`': 'ἲ',
    r"^i'": 'ἴ',
    r'^I`': 'Ἲ',
    r"^I'": 'Ἴ',
    r'^ho': 'ὁ',
    r'^o`': 'ὂ',
    r"^o'": 'ὄ',
    r'^O`': 'Ὂ',
    r"^O'": 'Ὄ',
    r'^hw': 'ὡ',
    r'^w`': 'ὢ',
    r"^w'": 'ὤ',
    r'^W`': 'Ὢ',
    r"^W'": 'Ὤ',
    r'a/i': 'ᾳ',
    r'A/i': 'ᾼ',
    r'h/i': 'ῃ',
    r'H/i': 'ῌ',
    r'w/i': 'ῳ',
    r'W/i': 'ῼ',
    r'^Ou': 'Ὀυ',
    r'^ou': 'οὐ',
    r'^Eu': 'Ἐυ',
    r'^eu': 'εὐ',
    r'^Au': 'Ἀυ',
    r'^au': 'αὐ',
    r'^Ei': 'Ἐι',
    r'^ei': 'εἰ',
    r'^Oi': 'Ὀι',
    r'^oi': 'οἰ',
    r'^Ai': 'Ἀι',
    r'^ai': 'αἰ',
    r'^a': 'ἀ',
    r'^A': 'Ἀ',
    r'^e': 'ἐ',
    r'^E': 'Ἐ',
    r'^h': 'ἠ',
    r'^H': 'Ἠ',
    r'^i': 'ἰ',
    r'^I': 'Ἰ',
    r'^o': 'ὀ',
    r'^O': 'Ὀ',
    r'^w': 'ὠ',
    r'^W': 'Ὠ',
    r'a`': 'ὰ',
    r"a'": 'ά',
    r'e`': 'ὲ',
    r"e'": 'έ',
    r'h`': 'ὴ',
    r"h'": 'ή',
    r'i`': 'ὶ',
    r"i'": 'ί',
    r'o`': 'ὸ',
    r"o'": 'ό',
    r'w`': 'ὼ',
    r"w'": 'ώ',
    r'A`': 'Ὰ',
    r"A'": 'Ά',
    r'E`': 'Ὲ',
    r"E'": 'Έ',
    r'H`': 'Ὴ',
    r"H'": 'Ή',
    r'ï`': 'ῒ',
    r"ï'": 'ΐ',
    r'I`': 'Ὶ',
    r"I'": 'Ί',
    r'O`': 'Ὸ',
    r"O'": 'Ό',
    r'W`': 'Ὼ',
    r"W'": 'Ώ',
    r'ch': 'χ',
    r'kh': 'χ',
    r'ng': 'γγ',
    r'ph': 'φ',
    r'ps': 'ψ',
    r'th': 'θ',
    r'a': 'α',
    r'e': 'ε',
    r'i': 'ι',
    r'o': 'ο',
    r'h': 'η',
    r'w': 'ω',
    r'b': 'β',
    r'B': 'Β',
    r'd': 'δ',
    r'D': 'Δ',
    r'f': 'ϝ',
    r'F': 'Ϝ',
    r'g': 'γ',
    r'G': 'Γ',
    r'k': 'κ',
    r'K': 'Κ',
    r'l': 'λ',
    r'L': 'Λ',
    r'm': 'μ',
    r'M': 'Μ',
    r'n': 'ν',
    r'N': 'Ν',
    r'p': 'π',
    r'P': 'Π',
    r'q': 'ϟ',
    r'Q': 'Ϟ',
    r'r': 'ρ',
    r'R': 'Ρ',
    r'ŝ': 'ϻ',
    r'Ŝ': 'Ϻ',
    r'š': 'ϸ',
    r'Š': 'Ϸ',
    r't': 'τ',
    r'T': 'Τ',
    r'x': 'ξ',
    r'X': 'Ξ',
    r'z': 'ζ',
    r'Z': 'Ζ'
}

_grk2lat = {
    r'γγ': 'ng',
    r'β': 'b',
    r'Β': 'B',
    r'γ': 'g',
    r'Γ': 'G',
    r'δ': 'd',
    r'Δ': 'D',
    r'θ': 'th',
    r'Θ': 'Th',
    r'κ': 'k',
    r'Κ': 'K',
    r'λ': 'l',
    r'Λ': 'L',
    r'μ': 'm',
    r'Μ': 'M',
    r'ν': 'n',
    r'Ν': 'N',
    r'ξ': 'x',
    r'Ξ': 'X',
    r'π': 'p',
    r'Π': 'P',
    r'ϻ': 'ŝ',
    r'Ϻ': 'Ŝ',
    r'ρ': 'r',
    r'Ρ': 'R',
    r'ῤ': 'r',
    r'Ρ̓': 'R',
    r'ῥ': 'rh',
    r'Ῥ': 'Rh',
    r'σ': 's',
    r'Σ': 'S',
    r'ς': 's',
    r'τ': 't',
    r'Τ': 'T',
    r'φ': 'ph',
    r'Φ': 'Ph',
    r'ψ': 'ps',
    r'Ψ': 'Ps',
    r'α': 'a',
    r'Α': 'A',
    r'ἀ': 'a',
    r'Ἀ': 'A',
    r'ἄ': 'á',
    r'Ἄ': 'Á',
    r'ᾄ': 'ái',
    r'ᾌ': 'Ái',
    r'ἂ': 'à',
    r'Ἂ': 'À',
    r'ᾂ': 'ài',
    r'ᾊ': 'Ài',
    r'ἆ': 'â',
    r'Ἆ': 'Â',
    r'ᾆ': 'âi',
    r'ᾎ': 'Âi',
    r'ᾀ': 'ai',
    r'ᾈ': 'Ai',
    r'ἁ': 'ha',
    r'Ἁ': 'Ha',
    r'ἅ': 'há',
    r'Ἅ': 'Há',
    r'ᾅ': 'hái',
    r'ᾍ': 'Hái',
    r'ἃ': 'hà',
    r'Ἃ': 'Hà',
    r'ᾃ': 'hài',
    r'ᾋ': 'Hài',
    r'ἇ': 'hâ',
    r'Ἇ': 'Hâ',
    r'ᾇ': 'hâi',
    r'ᾏ': 'Hâi',
    r'ᾁ': 'hai',
    r'ᾉ': 'Hai',
    r'ά': 'á',
    r'Ά': 'Á',
    r'ᾴ': 'ái',
    r'ὰ': 'à',
    r'Ὰ': 'À',
    r'ᾲ': 'ài',
    r'ᾶ': 'â',
    r'ᾷ': 'âi',
    r'ᾱ': 'ā',
    r'Ᾱ': 'Ā',
    r'ᾳ': 'ai',
    r'ᾼ': 'Ai',
    r'ε': 'e',
    r'Ε': 'E',
    r'ἐ': 'e',
    r'Ἐ': 'E',
    r'ἔ': 'é',
    r'Ἔ': 'É',
    r'ἒ': 'è',
    r'Ἒ': 'È',
    r'ἑ': 'he',
    r'Ἑ': 'He',
    r'ἕ': 'hé',
    r'Ἕ': 'Hé',
    r'ἓ': 'hè',
    r'Ἓ': 'Hè',
    r'έ': 'é',
    r'Έ': 'É',
    r'É': 'ὲ',
    r'è': 'è',
    r'Ὲ': 'È',
    r'ζ': 'z',
    r'Ζ': 'Z',
    r'η': 'ē',
    r'Η': 'Ē',
    r'ἠ': 'ē',
    r'Ἠ': 'Ē',
    r'ἤ': 'ḗ',
    r'Ἤ': 'Ḗ',
    r'ᾔ': 'ḗi',
    r'ᾜ': 'Ḗi',
    r'ἢ': 'ḕ',
    r'Ἢ': 'Ḕ',
    r'ᾒ': 'ḕi',
    r'ᾚ': 'Ḕi',
    r'ἦ': 'ê',
    r'Ἦ': 'Ê',
    r'ᾖ': 'êi',
    r'ᾞ': 'Êi',
    r'ᾐ': 'ēi',
    r'ᾘ': 'Ēi',
    r'ἡ': 'hē',
    r'Ἡ': 'Hē',
    r'ἥ': 'hḗ',
    r'Ἥ': 'Hḗ',
    r'ᾕ': 'hḗi',
    r'ᾝ': 'Hḗi',
    r'ἣ': 'hḕ',
    r'Ἣ': 'Hḕ',
    r'ᾓ': 'hḕi',
    r'ᾛ': 'Hḕi',
    r'ἧ': 'hê',
    r'Ἧ': 'Hê',
    r'ᾗ': 'hêi',
    r'ᾟ': 'Hêi',
    r'ᾑ': 'hēi',
    r'ᾙ': 'Hēi',
    r'ή': 'ḗ',
    r'Ή': 'Ḗ',
    r'ῄ': 'ḗi',
    r'ὴ': 'ḕ',
    r'Ὴ': 'Ḕ',
    r'ῂ': 'ḕi',
    r'ῆ': 'ē̂',
    r'ῇ': 'êi',
    r'ῃ': 'ēi',
    r'ῌ': 'Ēi',
    r'ι': 'i',
    r'Ι': 'I',
    r'ἰ': 'i',
    r'Ἰ': 'I',
    r'ἴ': 'í',
    r'Ἴ': 'Í',
    r'ἲ': 'ì',
    r'Ἲ': 'Ì',
    r'ἶ': 'î',
    r'Ἶ': 'Î',
    r'ἱ': 'hi',
    r'Ἱ': 'Hi',
    r'ἵ': 'hí',
    r'Ἵ': 'Hí',
    r'ἳ': 'hì',
    r'Ἳ': 'Hì',
    r'ἷ': 'hî',
    r'Ἷ': 'Hî',
    r'ί': 'í',
    r'Ί': 'Í',
    r'ὶ': 'ì',
    r'Ὶ': 'Ì',
    r'ῖ': 'î',
    r'ϊ': 'ï',
    r'Ϊ': 'Ï',
    r'ΐ': 'ḯ',
    r'ῒ': 'ï̀',
    r'ῗ': 'ï̂',
    r'ο': 'o',
    r'Ο': 'O',
    r'ὀ': 'o',
    r'Ὀ': 'O',
    r'ὄ': 'ó',
    r'Ὄ': 'Ó',
    r'ὂ': 'ò',
    r'Ὂ': 'Ò',
    r'ὁ': 'ho',
    r'Ὁ': 'Ho',
    r'ὅ': 'hó',
    r'Ὅ': 'Hó',
    r'ὃ': 'hò',
    r'Ὃ': 'Hò',
    r'ό': 'ó',
    r'ó': 'Ό',
    r'Ó': 'Ó',
    r'ὸ': 'ò',
    r'Ὸ': 'Ò',
    r'ω': 'ō',
    r'Ω': 'Ō',
    r'ὠ': 'ō',
    r'Ὠ': 'Ō',
    r'ὤ': 'ṓ',
    r'Ὤ': 'Ṓ',
    r'ᾤ': 'ṓi',
    r'ᾬ': 'Ṓi',
    r'ὢ': 'ṑ',
    r'Ὢ': 'Ṑ',
    r'ᾢ': 'ṑi',
    r'ᾪ': 'Ṑi',
    r'ὦ': 'ô',
    r'Ὦ': 'Ô',
    r'ᾦ': 'ôi',
    r'ᾮ': 'Ôi',
    r'ᾠ': 'ōi',
    r'ᾨ': 'Ōi',
    r'ὡ': 'hō',
    r'Ὡ': 'Hō',
    r'ὥ': 'hṓ',
    r'Ὥ': 'Hṓ',
    r'ᾥ': 'hṓi',
    r'ᾭ': 'Hṓi',
    r'ὣ': 'hṑ',
    r'Ὣ': 'Hṑ',
    r'ᾣ': 'hṑi',
    r'ᾫ': 'Hṑi',
    r'ὧ': 'hô',
    r'Ὧ': 'Hô',
    r'ᾧ': 'hôi',
    r'ᾯ': 'Hôi',
    r'ᾡ': 'hōi',
    r'ᾩ': 'Hōi',
    r'ώ': 'ṓ',
    r'Ώ': 'Ṓ',
    r'ῴ': 'ṓi',
    r'ὼ': 'ṑ',
    r'Ὼ': 'Ṑ',
    r'ῲ': 'ṑi',
    r'ῶ': 'ô',
    r'ῷ': 'ôi',
    r'ῳ': 'ōi',
    r'ῼ': 'Ōi',
    r'ϸ': 'š',
    r'Ϸ': 'Š',
}

_upsilon_y = {
    r'υ': 'y',
    r'Υ': 'Y',
    r'ὐ': 'y',
    r'Υ̓': 'Y',
    r'ὔ': 'ý',
    r'ὒ': 'ỳ',
    r'ὖ': 'ŷ',
    r'ὑ': 'hy',
    r'Ὑ': 'Hy',
    r'ὕ': 'hý',
    r'Ὕ': 'Hý',
    r'ὓ': 'hỳ',
    r'Ὓ': 'Hỳ',
    r'ὗ': 'hŷ',
    r'Ὗ': 'Hŷ',
    r'ύ': 'ý',
    r'Ύ': 'Ý',
    r'ὺ': 'ỳ',
    r'Ὺ': 'Ỳ',
    r'ῦ': 'ŷ',
    r'ϋ': 'ÿ',
    r'Ϋ': 'Ÿ',
    r'ΰ': 'ÿ́',
    r'ῢ': 'ÿ̀',
    r'ῧ': 'ÿ̂',
}

_upsilon_u = {
    r'υ': 'u',
    r'Υ': 'U',
    r'ὐ': 'u',
    r'Υ̓': 'U',
    r'ὔ': 'ú',
    r'ὒ': 'ù',
    r'ὖ': 'û',
    r'ὑ': 'hu',
    r'Ὑ': 'Hu',
    r'ὕ': 'hú',
    r'Ὕ': 'Hú',
    r'ὓ': 'hù',
    r'Ὓ': 'Hù',
    r'ὗ': 'hû',
    r'Ὗ': 'Hû',
    r'ύ': 'ú',
    r'Ύ': 'Ú',
    r'ὺ': 'ù',
    r'Ὺ': 'Ù',
    r'ῦ': 'û',
    r'Û': 'Û',
    r'ϋ': 'ü',
    r'Ϋ': 'Ü',
    r'ΰ': 'ǘ',
    r'ῢ': 'ǜ',
    r'ῧ': 'ü̂',
}

_chi_ch = {
    r'γχ': 'nch',
    r'χ': 'ch',
    r'Χ': 'Ch'
}
_chi_kh = {
    r'γχ': 'nkh',
    r'χ': 'kh',
    r'Χ': 'Kh'
}


def lat2grk(s: str) -> str:
    patterns = [re.compile(key) for key in _lat2grk]
    temp = normalize('NFC', s)
    for pattern in patterns:
        temp = pattern.sub(_lat2grk[pattern.pattern], temp)
    return normalize('NFC', s) if temp == s else temp


def grk2lat(s: str, upsilon='u', chi='ch') -> str:
    __upsilon = _upsilon_y if upsilon == 'y' else _upsilon_u
    __chi = _chi_kh if chi == 'kh' else _chi_ch
    patterns = [re.compile(key) for key in chain(_grk2lat, __upsilon, __chi)]
    __grk2lat = {**_grk2lat, **__upsilon, **__chi}
    temp = normalize('NFC', s)
    for pattern in patterns:
        temp = pattern.sub(__grk2lat[pattern.pattern], temp)
    return normalize('NFC', s) if temp == s else temp
